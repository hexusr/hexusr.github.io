---
layout: post
title:  "Linux-系统调用常用IO操作"
date:   2017-10-17
categories: Linux-C
---
## 1. lseek()
显示修改已打开文件的文件偏移量
```
 #include <unistd.h>
 
 off_t lseek(int fildes, off_t offset, int whence);

```
### 1.1 return: 修改成功返回新的文件偏移量，否则返回-1.
### 1.2 offset: 指定了一个以字节为单位的数值。
### 1.3 whence: 表明应该参照那个基点来解释offset参数。whence应为下列其中之一。
#### 1.3.1 SEEK_SET: 将文件偏移量设置为从文件头部起始点开始的offset个字节。
#### 1.3.2 SEEK_CUR: 相对于当前文件偏移量，将文件偏移量调整offset个字节。
#### 1.3.3 SEEK_END: 将文件偏移量设置为起始于文件尾部的offset个字节。
## 2 fcntl()
fcntl()用来操作已打开文件的文件描述符。例如：获取或修改其访问模式或状态标志。
```
       #include <fcntl.h>

       int fcntl(int fildes, int cmd, ...);

```
### 2.1 return : 成功返回 cmd的依赖，否则返回-1。
### 2.2 fildes: 要操作文件的文件描述符。
### 2.3 cmd: fcntl() 执行的命令常数。
## 3.  文件描述符、打开的文件句柄和i-node之间的关系

![](https://coding.net/u/TryBin/p/image/git/raw/master/Linux-C/%25E6%2596%2587%25E4%25BB%25B6%25E6%258F%258F%25E8%25BF%25B0%25E7%25AC%25A6%25E3%2580%2581%25E6%2589%2593%25E5%25BC%2580%25E7%259A%2584%25E6%2596%2587%25E4%25BB%25B6%25E5%258F%25A5%25E6%259F%2584%25E5%2592%258Ci-node%25E4%25B9%258B%25E9%2597%25B4%25E7%259A%2584%25E5%2585%25B3%25E7%25B3%25BB.png)

## 4. dup()和dup2()
dup()系统调用复制一个打开的文件描述符oldfd,并返回一个新描述符。
dup2()系统调用会为oldfd参数指定的文件描述符创建副本，编号由newfd指定。若newf所指定编号的文件描述符之前已经打开，那么dup2()会先将其关闭。
```
 #include <unistd.h>

       int dup(int fildes);
       int dup2(int fildes, int fildes2);
s
```
## 5. pread()和pwrite()
## 6. readv()和writev()
## 7. truncate()和ftruncate()
## 8. mkstemp()